<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Opiniões | O Momento Mágico</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --gold-primary: #D4AF37;
        --gold-light: #F4E4B7;
        --gold-dark: #B8941E;
        --black: #000000;
        --dark-gray: #0A0A0A;
        --medium-gray: #1A1A1A;
        --text-light: #F5F5F5;
        --text-gray: #CCCCCC;
        --font-display: 'Playfair Display', serif;
        --font-body: 'Poppins', sans-serif;
      }

      body {
        font-family: var(--font-body);
        background: var(--black);
        color: var(--text-light);
        line-height: 1.7;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .section-title {
        font-family: var(--font-display);
        font-weight: 800;
        text-align: center;
        margin-bottom: 1rem;
        font-size: clamp(2rem, 4vw, 3rem);
      }

      .brand-text {
        font-family: var(--font-display);
        font-weight: 800;
        background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-light) 50%, var(--gold-primary) 100%);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: shimmerGold 3s ease-in-out infinite;
      }

      @keyframes shimmerGold {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      .btn-gold {
        background: linear-gradient(135deg, var(--gold-dark) 0%, var(--gold-primary) 50%, var(--gold-light) 100%);
        background-size: 200% 200%;
        border: none;
        color: var(--black);
        font-weight: 700;
        border-radius: 50px;
        padding: 0.75rem 2rem;
        box-shadow: 0 8px 32px rgba(212, 175, 55, 0.2);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        font-size: 0.95rem;
      }

      .btn-gold:hover {
        background-position: 100% 50%;
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 12px 40px rgba(212, 175, 55, 0.35);
        color: var(--black);
      }

      .btn-outline-light {
        border: 2px solid var(--text-light);
        border-radius: 50px;
        padding: 0.75rem 2rem;
        background: rgba(255, 255, 255, 0.05);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        font-size: 0.95rem;
        font-weight: 600;
      }

      .btn-outline-light:hover {
        background: var(--text-light);
        color: var(--black);
        transform: translateY(-2px);
      }

      .award-banner {
        max-width: 1100px;
        margin: 0 auto 2rem;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(212, 175, 55, 0.3);
        border-radius: 24px;
        background:
          radial-gradient(1000px 400px at -10% -20%, rgba(212, 175, 55, 0.08), transparent 60%),
          radial-gradient(900px 380px at 110% 120%, rgba(212, 175, 55, 0.08), transparent 60%),
          linear-gradient(135deg, var(--dark-gray) 0%, var(--medium-gray) 100%);
        box-shadow:
          0 16px 48px rgba(0, 0, 0, 0.4),
          0 0 40px rgba(212, 175, 55, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
        transition: all 0.4s ease;
      }

      .award-banner:hover {
        transform: translateY(-4px);
        box-shadow:
          0 20px 60px rgba(0, 0, 0, 0.5),
          0 0 50px rgba(212, 175, 55, 0.15);
      }
      .award-banner .wrap {
        display: grid;
        grid-template-columns: 1fr 360px;
        gap: 2rem;
        align-items: center;
        padding: 2.5rem;
      }

      .award-copy h1 {
        font-family: var(--font-display);
        font-size: clamp(1.75rem, 3vw, 2.5rem);
        font-weight: 800;
        margin: 0 0 1rem;
        background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-light) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .award-copy p {
        margin: 0 0 0.5rem;
        opacity: 0.9;
        color: var(--text-gray);
        line-height: 1.7;
        font-size: 1.05rem;
      }

      .award-stats {
        margin-top: 1rem;
        font-weight: 700;
        color: var(--gold-primary);
        font-size: 1.1rem;
        letter-spacing: 0.02em;
      }
      .award-card {
        background: var(--black);
        border: 1px solid rgba(212, 175, 55, 0.4);
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(212, 175, 55, 0.2);
        transition: all 0.3s ease;
      }

      .award-card:hover {
        transform: scale(1.02);
        box-shadow: 0 12px 40px rgba(212, 175, 55, 0.3);
      }

      .award-card img {
        display: block;
        width: 100%;
        height: auto;
        object-fit: contain;
        background: linear-gradient(135deg, #FFFFFF 0%, #F5F5F5 100%);
      }
      @media (max-width: 991.98px) {
        .award-banner .wrap {
          grid-template-columns: 1fr;
          gap: 14px;
        }
      }

      .opiniao-preview {
        max-width: 1100px;
        margin: 2rem auto;
        background: linear-gradient(135deg, var(--medium-gray) 0%, var(--dark-gray) 100%);
        border: 1px solid rgba(212, 175, 55, 0.2);
        border-radius: 24px;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      .opiniao-preview .top {
        padding: 18px 20px;
        border-bottom: 1px solid #2a2a2a;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
      }
      .opiniao-preview .url {
        color: #bbb;
        font-size: 0.95rem;
        word-break: break-all;
      }
      .opiniao-preview .frame-look {
        min-height: 220px;
        background: linear-gradient(180deg, #0d0d0d, #000);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #ddd;
        text-align: center;
        padding: 16px 24px;
      }
      .opiniao-preview .frame-look p {
        max-width: 640px;
        margin: 0 auto;
        opacity: 0.9;
      }

      /* Carrossel premium */
      #opiniaoCarousel.carousel {
        max-width: 1100px;
        margin: 3rem auto;
        border-radius: 24px;
        overflow: hidden;
        border: 1px solid rgba(212, 175, 55, 0.3);
        background: var(--black);
        box-shadow:
          0 16px 48px rgba(0, 0, 0, 0.5),
          0 0 40px rgba(212, 175, 55, 0.1);
      }
      #opiniaoCarousel.carousel.carousel-fade .carousel-item {
        transition: opacity 0.6s ease;
        opacity: 0;
      }
      #opiniaoCarousel.carousel.carousel-fade .carousel-item.active {
        opacity: 1;
      }

      .carousel-item {
        position: relative;
        background: #000;
      }
      .carousel-item::after {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
          1200px 480px at 50% 90%,
          rgba(0, 0, 0, 0),
          rgba(0, 0, 0, 0.55)
        );
        pointer-events: none;
      }
      .carousel-item .item-inner {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        padding: 0;
      }
      .carousel-item img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        image-rendering: auto;
        backface-visibility: hidden;
        transform: translateZ(0);
      }
      @media (min-width: 992px) {
        .carousel-item {
          min-height: 540px;
        }
      }
      @media (max-width: 991.98px) {
        .carousel-item {
          min-height: 380px;
        }
      }
      @media (max-width: 575.98px) {
        .carousel-item {
          min-height: 300px;
        }
      }

      /* Controles e indicadores com miniaturas */
      .carousel-control-prev,
      .carousel-control-next {
        width: 56px;
      }
      .carousel-control-prev:hover,
      .carousel-control-next:hover {
        filter: brightness(1.1);
      }
      .carousel-indicators {
        margin: 0;
        padding: 10px 12px;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0.35),
          rgba(0, 0, 0, 0.55)
        );
        gap: 8px;
      }
      .carousel-indicators [data-bs-target] {
        width: 56px;
        height: 36px;
        border-radius: 6px;
        border: 1px solid rgba(255, 255, 255, 0.35);
        background: #222;
        background-size: cover;
        background-position: center;
        opacity: 0.6;
        transition: opacity 0.2s ease, transform 0.2s ease,
          border-color 0.2s ease;
      }
      .carousel-indicators [data-bs-target].active {
        opacity: 1;
        border-color: #e3c45c;
        transform: translateY(-1px);
        box-shadow: 0 6px 14px rgba(227, 196, 92, 0.25);
      }

      /* Zoom elegante no clique (lightbox) */
      .viewer-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.85);
        backdrop-filter: blur(2px);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1080;
      }
      .viewer-backdrop.show {
        display: flex;
      }
      .viewer-img {
        max-width: 95vw;
        max-height: 90vh;
        border-radius: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.15);
      }
      .viewer-close {
        position: fixed;
        top: 14px;
        right: 14px;
      }

      .empty-hint {
        max-width: 980px;
        margin: 28px auto;
        color: var(--gray-300);
        text-align: center;
      }

      /* Navbar consistent with main page */
      .navbar {
        background: rgba(0, 0, 0, 0.7) !important;
        -webkit-backdrop-filter: blur(24px) saturate(180%);
        backdrop-filter: blur(24px) saturate(180%);
        padding: 1.5rem 0;
        border-bottom: 1px solid rgba(212, 175, 55, 0.08);
      }

      .navbar.scrolled {
        background: rgba(0, 0, 0, 0.95) !important;
        padding: 0.75rem 0;
        border-bottom-color: rgba(212, 175, 55, 0.15);
      }

      .navbar-brand {
        display: flex;
        align-items: center;
        gap: 1rem;
        text-decoration: none;
        transition: transform 0.3s ease;
      }

      .navbar-brand:hover {
        transform: translateY(-2px);
      }

      .navbar-brand img {
        filter: drop-shadow(0 2px 8px rgba(212, 175, 55, 0.3));
        transition: filter 0.3s ease;
      }

      .navbar-brand:hover img {
        filter: drop-shadow(0 4px 12px rgba(212, 175, 55, 0.5));
      }

      .magic-disney {
        position: relative;
        display: inline-flex;
        align-items: center;
        text-decoration: none;
        transition: transform 0.3s ease;
      }

      .magic-disney:hover {
        transform: scale(1.05);
      }

      .magic-disney::before {
        content: '';
        position: absolute;
        inset: -10px;
        background-image:
          radial-gradient(2.5px 2.5px at 15% 25%, rgba(255, 255, 255, 0.8) 40%, transparent 41%),
          radial-gradient(2px 2px at 85% 30%, rgba(212, 175, 55, 0.7) 40%, transparent 41%),
          radial-gradient(2px 2px at 45% 75%, rgba(255, 255, 255, 0.75) 40%, transparent 41%),
          radial-gradient(2.5px 2.5px at 75% 70%, rgba(212, 175, 55, 0.8) 40%, transparent 41%);
        animation: twinkleStars 5s ease-in-out infinite;
        pointer-events: none;
      }

      @keyframes twinkleStars {
        0%, 100% {
          opacity: 0.6;
          transform: scale(1);
        }
        50% {
          opacity: 1;
          transform: scale(1.15);
        }
      }

      .nav-link {
        font-weight: 500;
        font-size: 1rem;
        color: var(--gray-100) !important;
        padding: 0.625rem 1.25rem !important;
        margin: 0 0.25rem;
        border-radius: 12px;
        transition: all 0.3s ease;
        position: relative;
      }

      .nav-link::after {
        content: '';
        position: absolute;
        bottom: 8px;
        left: 50%;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--gold-primary), transparent);
        transition: all 0.3s ease;
        transform: translateX(-50%);
        opacity: 0;
      }

      .nav-link:hover {
        color: var(--gold-light) !important;
        background: rgba(212, 175, 55, 0.08);
      }

      .nav-link:hover::after {
        width: 70%;
        opacity: 1;
      }

      /* Footer */
      footer {
        background: var(--black);
        border-top: 1px solid rgba(212, 175, 55, 0.15);
        padding: 2.5rem 0;
        text-align: center;
      }

      footer small {
        color: var(--gray-300);
        font-size: 0.95rem;
      }

      /* Mobile responsiveness */
      @media (max-width: 767.98px) {
        .navbar {
          padding: 1rem 0;
        }

        .navbar-toggler {
          border-color: var(--gold-primary);
          padding: 0.5rem;
        }

        .navbar-toggler-icon {
          background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(212, 175, 55, 1)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }

        .navbar-collapse {
          background: rgba(0, 0, 0, 0.98);
          -webkit-backdrop-filter: blur(20px);
          backdrop-filter: blur(20px);
          padding: 1rem;
          border-radius: 16px;
          margin-top: 1rem;
          border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .nav-link {
          padding: 0.75rem 1rem !important;
          margin: 0.25rem 0;
          text-align: center;
        }
      }
    </style>
    <link rel="stylesheet" href="style.css?v=2.0.1" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-black fixed-top shadow">
      <div class="container">
                <a
          class="navbar-brand d-flex align-items-center magic-disney"
          href="#home"
        >
          <img
            src="images/logomomentomagico.png"
            alt="Momento Mágico"
            height="60"
            class="me-2"
          />
          <span class="brand-text">Momento Mágico</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbarNav"
        >
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="index.html#services">Serviços</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html#packages">Pacotes</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html#contact">Contato</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="container" style="padding-top: 110px; padding-bottom: 40px">
      <section class="award-banner mb-3">
        <div class="wrap">
          <div class="award-copy">
            <h1>Opiniões de clientes</h1>
            <p>
              Confira avaliações reais de quem viveu a experiência do Momento
              Mágico. O conteúdo oficial está no Casamentos.com.br e pode ser
              aberto em nova aba.
            </p>
            <div class="award-stats">
              Avaliação média 5,0 • Empresa premiada Casamentos Awards 2025
            </div>
            <div class="mt-3 d-flex gap-2 flex-wrap">
              <a
                class="btn btn-gold"
                href="https://www.casamentos.com.br/animacao-festa/momento-magico--e430402/opinioes"
                target="_blank"
                rel="noopener"
                >Abrir no Casamentos.com</a
              >
              <a
                class="btn btn-outline-light"
                href="https://www.casamentos.com.br/animacao-festa/momento-magico--e430402"
                target="_blank"
                rel="noopener"
                >Ver perfil</a
              >
            </div>
          </div>
          <figure class="award-card m-0">
            <img
              src="images/selo-casamentos-2025.jpg"
              alt="Casamentos.com.br Awards 2025 — Momento Mágico"
            />
          </figure>
        </div>
      </section>

      <div class="opiniao-preview">
        <div class="top">
          <div class="url">
            https://www.casamentos.com.br/animacao-festa/momento-magico--e430402/opinioes
          </div>
          <a
            class="btn btn-gold"
            href="https://www.casamentos.com.br/animacao-festa/momento-magico--e430402/opinioes"
            target="_blank"
            rel="noopener"
            >Abrir avaliações</a
          >
        </div>
        <div class="frame-look">
          <p>
            O site do Casamentos.com não permite ser exibido dentro de outros
            sites por questões de segurança. Clique em “Abrir avaliações” para
            ver o conteúdo oficial em nova aba.
          </p>
        </div>
      </div>

      <div id="opiniaoCarousel" class="carousel slide carousel-fade">
        <div class="carousel-indicators" id="carouselIndicators"></div>
        <div class="carousel-inner" id="carouselInner"></div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#opiniaoCarousel"
          data-bs-slide="prev"
          aria-label="Anterior"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#opiniaoCarousel"
          data-bs-slide="next"
          aria-label="Próximo"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
      </div>

      <div id="emptyHint" class="empty-hint d-none">
        Nenhuma imagem encontrada em <code>images/opnioes</code>. Use .webp ou
        .jpg de boa resolução.
      </div>
    </main>

    <!-- Lightbox simples -->
    <div class="viewer-backdrop" id="viewer">
      <button class="btn btn-outline-light viewer-close" id="viewerClose">
        Fechar
      </button>
      <img class="viewer-img" id="viewerImg" alt="" />
    </div>

    <footer class="bg-dark text-center text-light py-3">
      <small>© 2025 O Momento Mágico - Todos os direitos reservados</small>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const BASE_FOLDER = "images/opnioes/";

      async function fetchManifest() {
        try {
          const r = await fetch(BASE_FOLDER + "manifest.json", {
            cache: "no-store",
          });
          if (r.ok) {
            const arr = await r.json();
            if (Array.isArray(arr) && arr.length) {
              return arr.map(
                (name) =>
                  new URL(name, location.origin + "/" + BASE_FOLDER).href
              );
            }
          }
        } catch (e) {}
        return null;
      }

      async function scrapeAutoIndex() {
        try {
          const res = await fetch(BASE_FOLDER, { cache: "no-store" });
          if (!res.ok) return [];
          const html = await res.text();
          const doc = new DOMParser().parseFromString(html, "text/html");
          const anchors = Array.from(doc.querySelectorAll("a[href]"));
          const files = anchors
            .map((a) => a.getAttribute("href"))
            .filter(
              (h) =>
                !!h &&
                !h.startsWith("?") &&
                !h.startsWith("/") &&
                !h.startsWith("../")
            )
            .filter((h) => /\.(jpe?g|png|gif|webp)$/i.test(h))
            .map((h) => new URL(h, res.url).href);
          return files;
        } catch (e) {
          return [];
        }
      }

      async function listImages() {
        const m = await fetchManifest();
        if (m && m.length) return m;
        return await scrapeAutoIndex();
      }

      // cria miniaturas nos indicadores e melhora "qualidade visual" com preload do próximo slide
      function buildCarousel(urls) {
        const inner = document.getElementById("carouselInner");
        const ind = document.getElementById("carouselIndicators");
        inner.innerHTML = "";
        ind.innerHTML = "";

        urls.forEach((src, i) => {
          const item = document.createElement("div");
          item.className = "carousel-item" + (i === 0 ? " active" : "");

          const wrap = document.createElement("div");
          wrap.className = "item-inner";

          const img = document.createElement("img");
          img.src = src;
          img.alt = "Opiniões - imagem " + (i + 1);
          img.loading = i === 0 ? "eager" : "lazy";
          if (i === 0) img.setAttribute("fetchpriority", "high");
          img.decoding = "async";
          img.className = "d-block";
          wrap.appendChild(img);
          item.appendChild(wrap);
          inner.appendChild(item);

          // indicador com miniatura
          const btn = document.createElement("button");
          btn.type = "button";
          btn.setAttribute("data-bs-target", "#opiniaoCarousel");
          btn.setAttribute("data-bs-slide-to", String(i));
          btn.style.backgroundImage = `url('${src}')`;
          if (i === 0) btn.className = "active";
          btn.ariaLabel = "Slide " + (i + 1);
          ind.appendChild(btn);
        });

        // preload simples do próximo slide quando o atual entrar
        const el = document.getElementById("opiniaoCarousel");
        el.addEventListener("slid.bs.carousel", (ev) => {
          const nextIndex = (ev.to + 1) % urls.length;
          const next = inner.querySelectorAll(".carousel-item img")[nextIndex];
          if (next && next.loading === "lazy") {
            const link = document.createElement("link");
            link.rel = "preload";
            link.as = "image";
            link.href = next.src;
            document.head.appendChild(link);
          }
        });

        // lightbox
        inner.addEventListener("click", (e) => {
          const img = e.target.closest("img");
          if (!img) return;
          const viewer = document.getElementById("viewer");
          const vimg = document.getElementById("viewerImg");
          vimg.src = img.src;
          viewer.classList.add("show");
        });
      }

      (async () => {
        const imgs = await listImages();
        imgs.sort((a, b) => a.localeCompare(b));
        buildCarousel(imgs);

        const el = document.getElementById("opiniaoCarousel");
        const prev = bootstrap.Carousel.getInstance(el);
        if (prev) prev.dispose();
        const instance = new bootstrap.Carousel(el, {
          interval: imgs.length > 1 ? 4500 : false,
          pause: false,
          touch: true,
          wrap: true,
        });
        if (imgs.length > 1) instance.cycle();

        // fechar lightbox
        document.getElementById("viewer").addEventListener("click", (e) => {
          if (e.target.id === "viewer" || e.target.id === "viewerClose") {
            e.currentTarget.classList.remove("show");
          }
        });
      })();
    </script>
  </body>
</html>
